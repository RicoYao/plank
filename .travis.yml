language: generic
sudo: required
dist: trusty
os:
  - osx
  - linux
osx_image: xcode10
install:
    - eval "$(curl -sL https://swiftenv.fuller.li/install.sh)"
jobs:
    include:
        - stage: "test"
          name: "Unit Tests"
          script: "make test"
        - stage: "integration"
          name: "Integration Tests"
          script: "make integration_test"

stages:
    - name: "test"
    - name: "integration"
      if: os = osx
